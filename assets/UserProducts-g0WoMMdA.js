import{L as P,l as m}from"./alertStore-FvkRcQaP.js";import{P as k}from"./PaginationComponent-hmKrfnKF.js";import{M as L}from"./bootstrap.esm-TTjMTX3M.js";import{_ as C,m as h,e as w,c as a,b as r,a as t,F as c,f as g,t as e,g as x,v as M,r as p,o as l,h as S,w as V,d as T,i as v}from"./index-rQ1ecwA4.js";import{c as E}from"./cartStore-TSL6et-M.js";var B={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/2023-vue-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:U,VITE_PATH:N}=B,q={components:{LoadingButton:P,PaginationComponent:k},data(){return{products:[],pagination:{},tempProduct:{},modal:"",quantity:1}},mounted(){this.getProducts(),this.modal=new L(this.$refs.modal)},methods:{...h(E,["postCart"]),...h(m,["showLoading","hideLoading"]),async getProducts(i=1){try{this.showLoading();const n=`${U}/api/${N}/products?page=${i}`,d=await this.$http.get(n);this.products=d.data.products,this.pagination=d.data.products}catch(n){this.$swal(n.data.message||"發生錯誤")}finally{this.hideLoading()}},seeMore(i){this.tempProduct=i,this.modal.show()},clickProduct(i){this.$router.push(`/product/${i}`)}},computed:{...w(m,["isLoading","loadingStatus"])}},D={class:"container"},I={class:"row row-cols-2 row-cols-md-3 g-3 list-unstyled"},R=["onClick"],A=["src"],O={class:"card-body"},F={class:"card-title"},H={class:"card-text text-truncate text-secondary"},$={class:"fs-5 me-1"},j={key:0},z={class:"p-3"},G=["onClick"],J={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},K={class:"modal-dialog modal-xl",role:"document"},Q={class:"modal-content border-0"},W={class:"modal-header bg-dark text-white"},X={class:"modal-title",id:"exampleModalLabel"},Y=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Z={class:"modal-body"},tt={class:"row"},ot={class:"col-sm-6"},st=["src"],et={class:"col-sm-6"},it={class:"badge bg-primary rounded-pill"},nt={key:0,class:"h5"},at={class:"h6"},lt={class:"h5"},ct={class:"input-group"},dt=["value"];function rt(i,n,d,pt,s,u){const y=p("LoadingOverlay"),b=p("LoadingButton"),f=p("PaginationComponent");return l(),a(c,null,[r(y,{active:i.isLoading},null,8,["active"]),t("div",D,[t("ul",I,[(l(!0),a(c,null,g(s.products,o=>(l(),a("li",{class:"col",key:o.id},[t("div",{class:"card h-100 hover-pointer",onClick:_=>u.clickProduct(o.id)},[t("img",{src:o.imageUrl,class:"card-img-top",alt:"產品圖",style:{height:"200px"}},null,8,A),t("div",O,[t("h5",F,e(o.title),1),t("p",H,e(o.description),1),t("div",null,[t("span",$,e(o.price!==o.origin_price?"限時優惠":"")+" NT $"+e(o.price),1),o.price!==o.origin_price?(l(),a("del",j," NT $"+e(o.origin_price),1)):S("",!0)])]),t("div",z,[r(b,{class:"btn-primary",onClick:v(_=>i.postCart(o.id),["stop"]),"loading-status":i.loadingStatus.productId===o.id},{default:V(()=>[T(" 加入購物車 ")]),_:2},1032,["onClick","loading-status"]),t("button",{type:"button",class:"btn btn-secondary float-end",onClick:v(_=>u.seeMore(o),["stop"])}," 查看更多 ",8,G)])],8,R)]))),128))]),r(f,{pagination:s.pagination},null,8,["pagination"])]),t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("h5",X,[t("span",null,e(s.tempProduct.title),1)]),Y]),t("div",Z,[t("div",tt,[t("div",ot,[t("img",{class:"img-fluid",src:s.tempProduct.imageUrl,alt:"產品圖",style:{height:"500px"}},null,8,st)]),t("div",et,[t("span",it,e(s.tempProduct.category),1),t("p",null,"商品描述："+e(s.tempProduct.description),1),t("p",null,"商品內容："+e(s.tempProduct.content),1),s.tempProduct.price===s.tempProduct.origin_price?(l(),a("div",nt,e(s.tempProduct.price)+" 元 ",1)):(l(),a(c,{key:1},[t("del",at,"原價 "+e(s.tempProduct.origin_price)+" 元",1),t("div",lt,"現在只要 "+e(s.tempProduct.price)+" 元",1)],64)),t("div",null,[t("div",ct,[x(t("select",{class:"form-select","onUpdate:modelValue":n[0]||(n[0]=o=>s.quantity=o)},[(l(),a(c,null,g(20,o=>t("option",{key:`qty${o}`,value:o},e(o),9,dt)),64))],512),[[M,s.quantity]]),t("button",{type:"button",class:"btn btn-primary",onClick:n[1]||(n[1]=o=>i.postCart(i.product.id,s.quantity))}," 加入購物車 ")])])])])])])])],512)],64)}const vt=C(q,[["render",rt]]);export{vt as default};
